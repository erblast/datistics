---
date : 2018-08-22
slug : r2py_pandas
title : Moving from R to python - 2/8 - pandas
author : Bjoern Koneswarakantha
categories: 
  - R vs. python
  - pandas
tags: 
  - R vs. python
  - pandas
  - python
  - R
  - dplyr
summary : We look at pandas and compare it to dplyr.
thumbnailImagePosition : left
thumbnailImage : r2py.png
---

{{< image classes="center" src="../../../r2py.png" thumbnail="../../../r2py.png" thumbnail-width="180px" thumbnail-height="180px">}}


- [1 of 8: IDE]( {{< relref "2018-08-21-r2py_ide.md" >}}  )
- [2 of 8: pandas]( {{< relref "2018-08-22-r2py_pandas.md" >}}  )
- [3 of 8: matplotlib and seaborn]( {{< relref "2018-08-23-r2py_matplotlib_seaborn.md" >}}  )

<!-- toc -->

# `pandas` vs. tidyverse

In base `R` matrices and dataframes have row name indexes which in my opinion are a bit annoying, because they add another layer of complexity to your data transformation. You naturally have to keep your column names in order and they sort of make you care about maintain sensible row names as well. So in the tidyverse row names have been declared a deprecated feature.

In `pandas` on the other hand indexing is brought to another level and they let you have multiple layers of row and column indexes. As far as I can tell most data reshaping methods such as `melt()`, `stack()`, `unstack()` and `pivot()` expect that you assign a unique index to each row. 

The advantage of multi indexing is apparently that it is easier to dice your data when you have more than 2 dimensions in you dataframe. However, I have been using `R` for almost two years now and never needed more than 2 dimensions in my dataframe. 

Talking to data scientists that are well-experienced with `pandas` I learned that hardly no-one seems to be using multi-indexes.

The tidyverse is all about functional programming, pandas not so much. Nevertheless there are some possibilities which I will get into in this post.

# pandas documentation

There is a comparison of the `pandas` and the `R` synthax in the `pandas` [documentation](https://pandas.pydata.org/pandas-docs/stable/comparison_with_r.html)


# Sample Data

When looking at `pandas` example code. The example usually starts by generating a dtaframe with random values sampled from a normal distribution. Coming from `R` I am used to use acutal sample data like the iris data set which are part of base `R`. We can use `pydataset` to get similar sample data sets in `python`.


```python
import seaborn as sns
import pandas as pd
import numpy as np

df = sns.load_dataset('iris')

print( df.head() )
```

       sepal_length  sepal_width  petal_length  petal_width species
    0           5.1          3.5           1.4          0.2  setosa
    1           4.9          3.0           1.4          0.2  setosa
    2           4.7          3.2           1.3          0.2  setosa
    3           4.6          3.1           1.5          0.2  setosa
    4           5.0          3.6           1.4          0.2  setosa
    

# Indexing

We have a numerical row index and the categorical variable Species with three unique values. In `R` we would convert this to a factor variable and there is something similar in `python` but it does not seem to be very pythonic to me. 


```python
df.index
```

    RangeIndex(start=0, stop=150, step=1)




```python
df.species.unique()
```

    array(['setosa', 'versicolor', 'virginica'], dtype=object)



Let's move Species to the index


```python
df.set_index('species'
             , inplace = True ## modifies existing object
             , append = True ## keeps exisiting index
             )

df.head()
```




